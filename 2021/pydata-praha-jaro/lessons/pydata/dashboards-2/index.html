<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1>Pokročilejší dashboarding</h1>
<p>V předchodí části jsme velice efektivně vytvořili jednoduchý a přesto užitečný dashboard na vizualizaci dat. Teď se podíváme na trochu rozsáhlejší aplikaci: Vrátíme se zpět k rybám, tučňákům a strojovému učení.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Fishboard</h2>
<p>Když jsme zkoumali možnosti strojového učení (regrese, klasifikace, klastrování atd.), měnili jsme metody, (hyper)parametry a dívali jsme se, jak dobře se stroj naučil odhadovat nějakou vlastnost z dat. To je rozhodně příležitost pro pěkný dashboard, který nám takovou práci usnadní.</p>
<h3>První verze</h3>
<p>První verzi aplikace najdeš v Github repozitáři <a href="https://github.com/coobas/fishboard">https://github.com/coobas/fishboard</a>. K sobě si ji naklonuješ příkazem</p>
<div class="highlight"><pre><code>git clone https://github.com/coobas/fishboard.git

</code></pre></div><p>Pro lokální vývoj takového dashboardu je rozumné vytvořit pro ni vlastní virtuální prostředí, aby se nemíchaly balíky z jiných projektů a aby tak chování aplikace bylo lokálně stejné jako na serveru. Můžeme postupovat takto:</p>
<div class="highlight"><pre><code>cd fishboard
python3 -m venv .venv</code></pre></div><p>Tím jsme vytvořili virtuální prostředí v adresáři <code>.venv</code>. Aktivujeme ho na Linuxu / Mac OS pomocí</p>
<div class="highlight"><pre><code>source .venv/bin/activate

</code></pre></div><p>nebo na Windows</p>
<div class="highlight"><pre><code>.venv/bin/activate.bat

</code></pre></div><p>A teď nainstalujeme všechny potřebné balíky:</p>
<div class="highlight"><pre><code>python -m pip install -r requirements.txt

</code></pre></div><p>Pak by měl jít fishboard spustit už známým způsobem:</p>
<div class="highlight"><pre><code>streamlit run fishboard.py</code></pre></div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>Přidáváme vizualizaci</h3>
<p>Jistě si všichni všimli, že fishboard umí pracovat jen s rybími daty a navíc je neumí ani vykreslit. Ještě že máme tuto část připravenou z předchozí části a nic nám nebrání ji použít.</p>
<p><strong>Úkol:</strong> Přidej do fishboardu naši předchozí aplikaci pro načítání a zobrazování dat. Asi bude potřeba někde místo <code>st.</code> použít <code>col1.</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Na co si dát pozor</h2>
<p>Streamlit aplikace je vlastně takový skript. Spouští se pořád dokola, jakmile uživatel něco zadá, někam klikne. Je to záměr, tento design přináší opravdu přímočarý způsob psaní užitečných webových aplikací. Za tuto přímočarost ale samozřejmě platíme některými omezeními.</p>
<h3>Rychlost</h3>
<p>Od Streamlitu rozhodně nečekejte nejsvižnější uživatelské rozhraní, spíš naopak. Tím, že se aplikace spouští celá stále dokola, může docházet k menším i větším prodlevám (které ovšem nemusí zásadně vadit). Existují dva jednoduché způsoby, jak rychlost optimalizovat:</p>
<ol>
<li>Používat cache na pomalé funkce, tj. "schovávat" si výsledky těchto funkcí, a pokud se funkce zavolá s argumenty, pro které už je výsledek k dispozici, vytáhne se výsledek (rychle) z cache. Streamlit na to má velice užitečnou funkci <code>st.cache</code>, která se nejčastěji používá jako @dekorátor.</li>
<li>Přidat tlačítko pro spuštění výpočtu, aby se drahé výpočty neprováděly po každé změně vstupu.</li>
</ol>
<h3>Složitost aplikace</h3>
<p>Programování ve Streamlitu je přímočaré a taková by měla být i aplikace, kterou vytváříme. Pokud potřebujeme nestandardní komponenty (widgety), detailní rozložení komponent na stránce nebo komplexní interakce mezi komponenty, je potřeba sáhnout jinam: Ve světě čistého Pythonu nám mohou posloužit <a href="https://plotly.com/dash/">Dash</a> nebo <a href="https://panel.holoviz.org/">Panel</a>. Největší možnosti pak přináší rozdělení aplikace na backend a frontend. Backend napíšeme samozřejmě v Pythonu (pomůže nám např. <a href="https://fastapi.tiangolo.com/">FastAPI</a>), frontend pak třeba v <a href="https://www.typescriptlang.org/">TypeScript</a> a <a href="https://reactjs.org/">React</a>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Domácí projekt</h2>
<p>Přidej do fishboardu možnost klasifikace a / nebo klastrování (PCA). Aplikaci spusť na Heroku. Jako bonus můžeš dát svůj kód k dispozici na Githubu.</p>
</div>
</div>
</div>
 

