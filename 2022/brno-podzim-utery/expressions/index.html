<h1 id="vyhodnocovani_vyrazu">Vyhodnocování výrazů
<a href="#header-vyhodnocovani_vyrazu" class="header-link">#</a>
</h1>
<p>Už víš, že Python se dá použít jako kalkulačka: dokáže spočítat
hodnotu <em>výrazu</em> (angl. <em>expression</em>) jako <code>3 * (5 + 2)</code>.
Jak to ale vlastně dělá?
Jak se vyhodnocují výrazy?</p>
<p>Pro základní výrazy je to tak, jak to možná znáš ze školy.
U <code>3 * (5 + 2)</code> nejdřív spočítáš to, co je v závorkách: <code>(5 + 2)</code> je <code>7</code>.
Výsledek dosadíš do původního výrazu místo závorky: <code>3 * 7</code>.
Stejně fungují výrazy v Pythonu.</p>
<p>Možná to zní jednoduše, ale protože budeme ten samý postup používat
i na složitější výrazy, hodí se ho umět „rozepsat“:</p>
<div class="highlight"><pre><span></span><span class="n">vysledek</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">#              ╰──┬──╯</span>
<span class="n">vysledek</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span>    <span class="mi">7</span>
<span class="c1">#          ╰─┬────╯</span>
<span class="n">vysledek</span> <span class="o">=</span>  <span class="mi">21</span>
</pre></div><p>Když Python potřebuje vyhodnotit <em>proměnnou</em>, dosadí její hodnotu.
Pokud je zrovna v proměnné <var>a</var> číslo 4, za <code>a</code> se dosadí <code>4</code>:</p>
<div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">vysledek</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="n">a</span>
<span class="c1">#           |   |    |</span>
<span class="n">vysledek</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span>
<span class="c1">#          ╰──┬──╯</span>
<span class="n">vysledek</span> <span class="o">=</span>    <span class="mi">9</span>    <span class="o">/</span> <span class="mi">4</span>
<span class="c1">#             ╰────┬─╯</span>
<span class="n">vysledek</span> <span class="o">=</span>        <span class="mf">2.25</span>
</pre></div><p>Python dodržuje <em>prioritu operátorů</em>: např. násobení vyhodnotí dřív než
sečítání.
Záleží přitom vždy na operátoru (znaménku).
Násobení čísel (<code>*</code>) a opakování řetězců (taky <code>*</code>) má vyšší prioritu;
sečítání čísel (<code>+</code>) a spojování řetězců (taky <code>+</code>) ji má nižší.</p>
<div class="highlight"><pre><span></span><span class="n">vysledek</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span>
<span class="c1">#              ╰─┬─╯</span>
<span class="n">vysledek</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span>   <span class="mi">6</span>
<span class="c1">#          ╰──┬──╯</span>
<span class="n">vysledek</span> <span class="o">=</span>  <span class="mi">10</span>

<span class="n">vyzva</span> <span class="o">=</span> <span class="s2">&quot;Volejte třikrát: &quot;</span> <span class="o">+</span> <span class="s2">&quot;Sláva! &quot;</span> <span class="o">*</span> <span class="mi">3</span>
<span class="c1">#                             ╰─────┬─────╯</span>
<span class="n">vyzva</span> <span class="o">=</span> <span class="s2">&quot;Volejte třikrát: &quot;</span> <span class="o">+</span> <span class="s2">&quot;Sláva! Sláva! Sláva! &quot;</span>
<span class="c1">#       ╰────────────────────┬──────────────────────╯</span>
<span class="n">vyzva</span> <span class="o">=</span> <span class="s2">&quot;Volejte třikrát: Sláva! Sláva! Sláva! &quot;</span>
</pre></div><p>Python nemá problém se složitými výrazy – vyhodnocování funguje vždy stejně.
Jen člověk, který program čte či píše, se ve výrazech může lehce ztratit.
Když opravdu potřebuješ napsat složitý výraz, je dobré jej rozdělit na několik
menších nebo vysvětlit pomocí komentáře.</p>
<p>Je ale dobré mít povědomí o tom, jak složité výrazy „fungují“,
aby ses jich nemusela bát.
Měla bys být schopná vysvětlit, co se stane,
když se Pythonu zeptáš, kolik je (-<var>b</var> + (<var>b</var>² -
4<var>a</var><var>c</var>)⁰·⁵) / (2<var>a</var>), abys pak věděla, co za
tebe Python dělá.</p>
<div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">3</span>


<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span>
<span class="c1">#     |    |            |   |                 |</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span> <span class="o">+</span> <span class="p">(</span><span class="mi">5</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">#          ╰──┬─╯   ╰─┬─╯                ╰──┬──╯</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span> <span class="o">+</span> <span class="p">(</span>  <span class="mi">25</span>   <span class="o">-</span>   <span class="mi">8</span>   <span class="o">*</span> <span class="mi">3</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span>    <span class="mi">4</span>
<span class="c1">#                     ╰───┬─╯</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span> <span class="o">+</span> <span class="p">(</span>  <span class="mi">25</span>   <span class="o">-</span>      <span class="mi">24</span>  <span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span>    <span class="mi">4</span>
<span class="c1">#         ╰───────┬──────────╯</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span> <span class="o">+</span>         <span class="mi">1</span>            <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span>    <span class="mi">4</span>
<span class="c1">#                 ╰──────┬──────────╯</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span> <span class="o">+</span>                <span class="mi">1</span><span class="p">)</span>            <span class="o">/</span>    <span class="mi">4</span>
<span class="c1">#    ╰────────────┬──────╯</span>
<span class="n">x</span> <span class="o">=</span>              <span class="o">-</span><span class="mi">4</span>                    <span class="o">/</span>    <span class="mi">4</span>
<span class="c1">#                 ╰────────────┬────────────╯</span>
<span class="n">x</span> <span class="o">=</span>                           <span class="o">-</span><span class="mf">1.0</span>
</pre></div><p>Výrazy se používají na více místech Pythonu než jen v přiřazování
do proměnných.
Třeba pro porovnání dvou hodnot.
Ale o tom zase příště.</p>